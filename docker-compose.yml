version: "3.9"

services:
  pam-shortcut:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        http_proxy: "http://192.168.98.199:8080"
        https_proxy: "http://192.168.98.199:8080"
    image: pam-shortcut:latest
    container_name: pam-shortcut
    environment:
      NODE_ENV: production
      DATA_DIR: /opt/monitoring/pam
    ports:
      - "3000:3000"
    volumes:
      - /opt/monitoring/pam:/opt/monitoring/pam
    deploy:
      resources:
        limits:
          cpus: "1.0"
          memory: 2g
        reservations:
          memory: 256m
    # For non-swarm docker-compose, deploy is ignored; use mem_limit/cpus as hint
    mem_limit: 2g
    mem_reservation: 256m
    cpus: "1.0"


